
% ------------------------------------------------------------
% ------------------------------------------------------------

\section[Summary]{Summary Plots}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Preliminaries}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]

\frametitle{Loading data into R \footnote{This and the next three slides are modified from the SCC Mini-Course\\ "Introductory Statistics with R" by Mine \c{C}etinkaya}}

\begin{lstlisting}
survey = read.table("http://www.stat.ucla.edu/~mine/students_survey_2008.txt", header = TRUE, sep = "\t")
# To see the variable names
names(survey)
# To refer to the variables by name:
attach(survey)
\end{lstlisting}

			\begin{beamerboxesrounded}[shadow=true]{}
			\ttfamily \tiny
			\begin{verbatim}
 [1] "gender"      "hand"        "eyecolor"    "glasses"     "california" 
 [6] "birthmonth"  "birthday"    "birthyear"   "ageinmonths" "height"     
[11] "graduate"    "oncampus"    "time"        "walk"        "hsclass"    
[16] "HSCA"        "calculus"    "AP"          "cell"        "ipod"       
[21] "sleep"       "alcohol"     "speed"       "UCLA"        "book"       
[26] "relax"       "instructor"  "tire"        "Quarter"   
			\end{verbatim}
			\end{beamerboxesrounded}
\normalsize
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Segmented Bar Charts}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]
  \frametitle{Segmented bar charts}

Displays two categorical variables at a time:
    \begin{columns}
      \column{0.60\textwidth}
\tiny
\begin{lstlisting}
barplot(table(gender, hand), col = c("skyblue", "blue"), main = "Segmented Bar Plot \n of Gender")
legend("topleft", c("females","males"), col = c("skyblue", "blue"), pch = 16, inset = 0.05)
\end{lstlisting}

     \column{0.40\textwidth}
       \begin{center}
\includegraphics[width = 40mm]{images/segbarplot.pdf}
\end{center}

\begin{center}
\scalebox{0.7}{%
\begin{tabular}{|r|r|r|r|}
  \hline
 & ambidextrous & left & right \\ \hline
  \hline
female &   9 &  67 & 806 \\ 
  male &  11 &  45 & 387 \\ 
   \hline
\end{tabular}}
\end{center}
\normalsize

\end{columns}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Pie Charts}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]
  \frametitle{Pie charts}

Pie charts display counts as percentages of individuals in each category:
    \begin{columns}
      \column{0.50\textwidth}

\begin{lstlisting}
table(gender)
\end{lstlisting}

\begin{table}[ht]
\begin{center}
\begin{tabular}{|r|r|}
  \hline
 & gender \\ 
  \hline
female & 882 \\ 
  male & 443 \\ 
   \hline
\end{tabular}
\end{center}
\end{table}

\begin{lstlisting}
pie(table(gender))
\end{lstlisting}

     \column{0.50\textwidth}
       \begin{center}
\includegraphics[width = 40mm]{images/pie.pdf}
\end{center}
\end{columns}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Histograms}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]
\frametitle{Histograms}
  \framesubtitle{Adding Summary Statistics to Plots}
Add the mean and median to a histogram:
    \begin{columns}
      \column{0.60\textwidth}

\begin{lstlisting}
hist(ageinmonths, main="Histogram of Age (Mo)")
abline(v=mean(ageinmonths), col = "blue")
abline(v=median(ageinmonths), col = "green")
legend("topright", c("Mean", "Median"), pch = 16, col = c("blue", "green"))
\end{lstlisting}

     \column{0.40\textwidth}
\begin{center}
\includegraphics[width = 45mm]{images/hist_meanmed.pdf}
\end{center}

\end{columns}
\end{frame}

%%%%% New frame
\begin{frame}[allowframebreaks, fragile]
\frametitle{Histograms}
\framesubtitle{Checking Normality}

One of the methods to test for normality of a variable is to look at the histogram (the sample density is in red, the theoretical normal density in blue):
  		\begin{lstlisting}
data(presidents)		
hist(presidents, prob=T, ylim=c(0, 0.04), breaks=20)
lines(density(presidents, na.rm=TRUE), col="red")
mu<-mean(presidents, na.rm=TRUE) 
sigma<-sd(presidents, na.rm=TRUE)
x<-seq(10,100,length=100) 
y<-dnorm(x,mu,sigma) 
lines(x,y,lwd=2,col="blue") 
		\end{lstlisting}

        \begin{center}
         \includegraphics[width=0.6\textwidth]{images/presHist.pdf}
        \end{center}
\end{frame}


%%%%% New frame
\begin{frame}[allowframebreaks, fragile]
\frametitle{Box and Whisker Plot}

Another method of looking at the distribution of the data is via boxplot:
  		\begin{lstlisting}
data(quakes)		
# Subset the magnitude:
ind<-ifelse(quakes[, 4]<4.5, 0, 1)
ind<-as.factor(ind)
boxplot(quakes[, 4]~ind)
# Alternatively:
library(lattice)
bwplot(quakes[, 4]~ind, xlab=c("Mag<4.5", "Mag>=4.5"), ylab="Magnitude")
		\end{lstlisting}

        \begin{center}
         \includegraphics[width=0.6\textwidth]{images/bwplot.pdf}
        \end{center}
\end{frame}

%%%%%% Alternatively:
\begin{frame}[allowframebreaks, fragile]
\frametitle{Beanplot}

An alternative to the boxplot is the  \ttfamily beanplot(): \normalfont
  		\begin{lstlisting}
library(beanplot)		
par(mfrow=c(1,2))
data(airquality)
boxplot(airquality[, 2], main="Boxplot", xlab="Solar")
beanplot(airquality[, 2], main="Beanplot", xlab="Solar")
		\end{lstlisting}
%For documentation of the package, please see: \itshape{\urlwofont{http://www.jstatsoft.org/v28/c01/}}.
        \begin{center}
         \includegraphics[width=0.7\textwidth]{images/beanPlot.pdf}
        \end{center}
\end{frame}
% left-skew: mean to the left of median

%%%%% New frame
\begin{frame}[allowframebreaks, fragile]
\frametitle{Scatterplots}

A method of looking at the distribution and correlation of the data is via \ttfamily scatterplot.matrix(): \normalfont
  		\begin{lstlisting}
data(quakes)
library(car)		
scatterplot.matrix(quakes[, 1:4])
		\end{lstlisting}

        \begin{center}
         \includegraphics[width=0.63\textwidth]{images/scatterPlot.pdf}
        \end{center}
\end{frame}

%%%% Check equality of distributions:
\begin{frame}[allowframebreaks, fragile]
\frametitle{Checking Equality of Distributions}

A method of checking equality of distributions is via \ttfamily qq(): \normalfont
  		\begin{lstlisting}
library(lattice)
survey = read.table("http://www.stat.ucla.edu/~mine/students_survey_2008.txt", header = TRUE, sep = "\t")
attach(survey) 
qq(gender~ageinmonths)
		\end{lstlisting}

        \begin{center}
         \includegraphics[width=0.6\textwidth]{images/qq.png}
        \end{center}
\end{frame}

%split.screen(c(1,2))        # split display into two screens
%split.screen(c(2,1),2)      # split bottom half in two
%screen(1)                   # prepare screen 1 for output
%qq(gender~ageinmonths)
%screen(4)                   # prepare screen 4 for output
% # boxplot(ageinmonths~gender)
% beanplot(ageinmonths~gender, ll=0.04, log="", col="black")
%screen(1, FALSE)            # return to screen 1, but do not clear
%close.screen(all = TRUE)    # exit split-screen mode


%%%%%%% New frame
\begin{frame}[fragile, allowframebreaks]
\frametitle{\ttfamily Identify\normalfont-ing Observations}
\framesubtitle{Preliminaries}
	\begin{lstlisting}
		# Generate data and fit a regression curve:
		set.seed(3012008)
		x=rnorm(100); y=-x+I(x^2) +rnorm(100)
		fit<-lm(y~x+I(x^2)); fit
	\end{lstlisting}

\begin{center}
\scalebox{1}{%
\begin{tabular}{|r|r|r|}
  \hline
 Intercept & x & $x^2$ \\
  \hline
0.1307 & -0.9701 & 0.9549  \\ 
   \hline
\end{tabular}}
\end{center}
\normalsize

	\begin{lstlisting}
		# Plot the resulting regression curve:
		plot(y~x, pch=19)
		curve(expr=fit[[1]][1]+fit[[1]][2]*x+fit[[1]][3]*I(x^2), from=range(x)[1], to=range(x)[2], add=TRUE, col="blue", lwd=2)
	\end{lstlisting}

\newpage
\begin{center}
\includegraphics[scale=0.35]{images/xyPlot.pdf}
\end{center}

\end{frame}

%%%
\begin{frame}[fragile, allowframebreaks]
\frametitle{\ttfamily Identify\normalfont-ing Observations}
\textbf{Left-click} \normalfont on the observations in the graphics window to see the row number. \\
\noindent \textbf{Right-click} \normalfont on the observation to exit the function.
	\begin{lstlisting}
		# Plot the data and fit the regression curve:
		plot(y~x, pch=19)
		curve(expr=fit[[1]][1]+fit[[1]][2]*x+fit[[1]][3]*I(x^2), from=range(x)[1], to=range(x)[2], add=TRUE, col="blue", lwd=2)
		# Identify the "outlying" observations:
		index<-identify(y~x); index		
	\end{lstlisting}

\newpage
\begin{center}
\includegraphics[scale=0.27]{images/xyPlotInd.png}
\end{center}

\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ------------------------------------------------------------
% ------------------------------------------------------------
